<?xml version="1.0" encoding="utf-8"?>
<events:EventDispatcher xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:business="flickr.business.*" xmlns:model="flickr.model.*" xmlns:events="flash.events.*">
	
	<mx:HTTPService id="configService" resultFormat="e4x" url="assets/config/configuration.xml" result="onConfigLoaded(event)"/>
	
	<mx:Script>
		<![CDATA[
			import flickr.model.Config;

			import mx.rpc.events.ResultEvent;
			
			[Bindable] public var config:Config;
		
			public function loadConfig():void
			{
				configService.send();
			}
			
			private function onConfigLoaded(event:ResultEvent):void
			{
				var info:XML = event.result as XML;
				config.setValues(info..url, info..api_key);
			}
		]]>
	</mx:Script>
</events:EventDispatcher>
