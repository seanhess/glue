<?xml version="1.0" encoding="utf-8"?>
<GlueMap xmlns:mx="http://www.adobe.com/2006/mxml" xmlns="http://glue.seanhess.net/2009" xmlns:view="cafe.view.*" xmlns:manager="cafe.manager.*" xmlns:business="com.cafetownsend.business.*" xmlns:store="cafe.store.*" xmlns:bifff="http://bifff.seanhess.net/2009" xmlns:service="cafe.service.*">
	<mx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
		]]>
	</mx:Script>
	
	<Command id="login" user="user" pass="pass">
		<Action call="authManager.login(scope.user, scope.pass)"/>
		<Action call="navManager.loginChanged(authManager.state)"/>
	</Command>
	
	<!-- Manager -->
	<manager:AuthorizationManager id="authManager" />
	<manager:EmployeeManager id="employeeManager" />
	<manager:NavigationManager id="navManager"/>
		
	<!-- Views -->
	<Glue match="MainUI">
		<Inject selectedPage="{navManager.currentPage}"/>
		<!--<Route event="{FlexEvent.CREATION_COMPLETE}" call="employeeManager.loadEmployees()"/>--> 
	</Glue>
	
	<Glue match="EmployeeLogin">
		<Inject authState="{authManager.state}"/>
		<Route event="login" call="login.execute({user:view.username, pass:view.password})"/>
	</Glue>
	
	<!--<Glue match="EmployeeList">
		<Inject employees="{employees.employeeList}"/>
		<Route event="logout" call="authManager.logout()"/>
		<Route event="newEmployee" call="employeeManager.newEmployee()"/>
		<Route event="selectEmployee" call="employeeManager.selectEmployee(scope.target.selectedEmployee)"/>
	</Glue>
	
	<Glue match="EmployeeDetail">
		<Inject selectedEmployee="{employees.employee}"/>
		<Route event="back" call="employeeManager.goBack()"/>
		<Route event="remove" call="employeeManager.deleteEmployee(employees.employee)"/>
		<Route event="save" call="employeeManager.saveEmployee(view.tempEmployee)"/>
	</Glue>-->
	
	<!-- Services :: Put these in another file -->
	<mx:HTTPService id="employeesService" url="assets/data/Employees.xml" resultFormat="e4x" />
	
</GlueMap>